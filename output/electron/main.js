import{app as o,BrowserWindow as l,ipcMain as i}from"electron";import n from"path";const s=!o.isPackaged;function t(){const e=new l({width:800,height:600,minWidth:200,minHeight:200,frame:!1,titleBarStyle:"hidden",webPreferences:{nodeIntegration:!1,contextIsolation:!0,webSecurity:!1,preload:n.join(process.cwd(),"output","electron","preload","preload.js")}});if(i.handle("window:minimize",()=>{e.minimize()}),i.handle("window:maximize",()=>(e.isMaximized()?e.unmaximize():e.maximize(),e.isMaximized())),i.handle("window:close",()=>{e.close()}),i.handle("window:isMaximized",()=>e.isMaximized()),s)e.loadURL("http://localhost:5173").catch(()=>{console.log("Dev server not ready, retrying..."),setTimeout(()=>e.loadURL("http://localhost:5173"),1e3)});else{const a=n.join(process.cwd(),"output","dist","index.html");e.loadFile(a)}}o.whenReady().then(()=>{t(),o.on("activate",function(){l.getAllWindows().length===0&&t()})});o.on("window-all-closed",function(){process.platform!=="darwin"&&o.quit()});o.on("before-quit",()=>{i.removeAllListeners("window:minimize"),i.removeAllListeners("window:maximize"),i.removeAllListeners("window:close"),i.removeAllListeners("window:isMaximized")});
